{% load static %}
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<body class="bg-gray-800 text-white">
    <div id="modals-here">
        <div class="pt-4 w-auto flex items-center position-fixed">
            <!-- Close button icon -->
            <button class="mr-2 p-2" onclick="goBack()">
                <i class="fa-solid fa-arrow-left fa-xl" style="color: #ffffff;"></i>
            </button>

            <!-- Channel logo -->
            <div class="w-8 h-8 rounded-full overflow-hidden bg-gray-300">
                <img src="{{ channel.logo.url }}" alt="{{ channel.name }} Logo" class="max-w-full max-h-full object-cover rounded-full">
                
            
            </div>

            <!-- Channel name -->
            <h1 class="text-lg px-2">
                <a href="{% url 'channel_name' channel.slug %}" class="text-white">{{ channel.name }}</a>
                <i class="fas fa-chevron-down ml-1 text-white fa-xs"></i>
            
            </h1>
            
        </div>
        <div class="bg-gray-800 mt-16 mx-3 rounded border border-gray-600 p-2 text-xs text-white">
            <i class="fa-regular fa-circle-info" style="color: #ffffff;"></i>
            Word cloud generated by YouTube news video titles of last 48 hours.
          </div>
          

        <!-- Story image/video -->
        <div class="container flex items-center -mt-24 justify-center h-screen">
            
            <div class="w-full h-2/3">

                {% with channel_name=channel.name|slugify %}
                <img src="{% static 'function/clouds/' %}{{ channel.name }}.svg" class="w-full h-full object-contain rounded-lg" alt="Story image/video">
                {% endwith %}
            </div>
        </div>
        
        
    </div>
    <div class="swiper-container fixed bottom-0 left-0 w-full pb-5 lg:mx-auto lg:flex lg:justify-center">
        <div class="swiper-wrapper flex overflow-x-auto scrollbar-hide">
            {% for channel in channels %}
            <div class="swiper-slide w-20 flex-shrink-0 ">
                <div class="h-14 w-14 rounded-full overflow-hidden bg-gray-300 flex items-center justify-center">
                    <img 
                      src="{{ channel.logo.url }}" 
                      alt="{{ channel.name }} Logo" 
                      class="max-w-full max-h-full object-cover rounded-full"
                      hx-get="/story/{{ channel.name }}" 
                      hx-target="#modals-here" 
                      hx-trigger="click"
                      onclick="updateURL('/story/{{ channel.id }}')"
                      hx-push-url="true"
                    >
                </div>
            </div>
            {% endfor %}
        </div>
    </div>




    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.6.1"></script>

    <script>
        function goBack() {
            history.go(-1);
        setTimeout(function() {
            window.location.reload();
        }, 10); 
          }
          
          function updateURL(newURL) {
            history.pushState({}, '', newURL);
          }
          
          var swiper = new Swiper('.swiper-container', {
            direction: 'horizontal',
            slidesPerView: 'auto',
            freeMode: true,
            scrollbar: {
              el: '.swiper-scrollbar',
            },
            mousewheel: true,
          });
          
    </script>
</body>
</html>